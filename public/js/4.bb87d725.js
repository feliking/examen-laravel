(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"8b24":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("div",{staticClass:"q-pa-md"},[a("Add"),a("Edit"),a("DeleteItem"),a("q-table",{attrs:{title:"Inscripciones",data:t.table,columns:t.columns,"row-key":"id",loading:t.loading,filter:t.filter,"binary-state-sort":""},scopedSlots:t._u([{key:"top-right",fn:function(){return[a("q-input",{staticClass:"q-mr-lg",attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),a("q-space"),a("q-separator",{attrs:{vertical:""}}),a("q-btn",{staticClass:"glossy q-ml-lg",attrs:{icon:"add",round:"",title:"Nueva inscripción",color:"primary"},on:{click:function(e){return e.preventDefault(),t.addData()}}}),a("q-btn",{staticClass:"glossy q-ml-lg",attrs:{icon:"picture_as_pdf",round:"",title:"Generar resporte de inscritos",color:"negative"},on:{click:function(e){return e.preventDefault(),t.generateReport()}}})]},proxy:!0},{key:"body-cell-opciones",fn:function(e){return[a("q-td",{attrs:{props:e}},[a("q-btn",{attrs:{flat:"",color:"negative",icon:"delete",title:"Eliminar"},on:{click:function(a){return t.deleteData(e.row)}}})],1)]}}])})],1)])},o=[],n=(a("e6cf"),a("ddb0"),a("2b3d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{attrs:{persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("q-card",{staticStyle:{"min-width":"800px"}},[a("q-form",{ref:"form",on:{submit:function(e){return t.save()}}},[a("q-toolbar",{staticClass:"glossy bg-primary text-white"},[a("q-toolbar-title",[a("span",{staticClass:"text-weight-bold"},[t._v("Nueva inscripción")])]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),a("q-card-section",{staticClass:"q-gutter-sm"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6 q-pa-md"},[a("q-input",{attrs:{label:"Carnet de identidad",rules:[function(t){return!!t||"Este campo es requerido"}]},on:{change:function(e){return t.getEstudiante()}},model:{value:t.estudiante.carnet_identidad,callback:function(e){t.$set(t.estudiante,"carnet_identidad",e)},expression:"estudiante.carnet_identidad"}}),a("q-input",{attrs:{label:"Nombre",disable:t.encontrado,rules:[function(t){return!!t||"Este campo es requerido"}]},model:{value:t.estudiante.nombre,callback:function(e){t.$set(t.estudiante,"nombre",e)},expression:"estudiante.nombre"}}),a("q-input",{attrs:{label:"Correo electronico",disable:t.encontrado,rules:[function(t){return!!t||"Este campo es requerido"}]},model:{value:t.estudiante.correo_electronico,callback:function(e){t.$set(t.estudiante,"correo_electronico",e)},expression:"estudiante.correo_electronico"}}),a("q-select",{attrs:{label:"Sucursal",options:t.sucursales,"option-label":"nombre","option-value":"id","map-options":"","emit-value":"",rules:[function(t){return!!t||"Este campo es requerido"}]},on:{input:function(e){return t.getCarreras(e)}},model:{value:t.inscripcion.sucursal_id,callback:function(e){t.$set(t.inscripcion,"sucursal_id",e)},expression:"inscripcion.sucursal_id"}})],1),a("div",{staticClass:"col-6 q-pa-md"},[a("q-select",{attrs:{label:"Carrera",options:t.carreras,"option-label":"nombre","option-value":"id","map-options":"","emit-value":"",rules:[function(t){return!!t||"Este campo es requerido"}]},on:{input:function(e){return t.getTurnos(e)}},model:{value:t.inscripcion.carrera_id,callback:function(e){t.$set(t.inscripcion,"carrera_id",e)},expression:"inscripcion.carrera_id"}}),a("q-select",{attrs:{label:"Turno",options:t.turnos,"option-label":"nombre","option-value":"id","map-options":"","emit-value":"",rules:[function(t){return!!t||"Este campo es requerido"}]},model:{value:t.inscripcion.turno_id,callback:function(e){t.$set(t.inscripcion,"turno_id",e)},expression:"inscripcion.turno_id"}}),a("q-select",{attrs:{label:"Paralelo",options:t.paralelos,"option-label":"nombre","option-value":"id","map-options":"","emit-value":"",rules:[function(t){return!!t||"Este campo es requerido"}]},model:{value:t.inscripcion.paralelo_id,callback:function(e){t.$set(t.inscripcion,"paralelo_id",e)},expression:"inscripcion.paralelo_id"}}),a("q-select",{attrs:{label:"Plan",options:t.planes,"option-label":"nombre","option-value":"id","map-options":"","emit-value":"",rules:[function(t){return!!t||"Este campo es requerido"}]},model:{value:t.inscripcion.plan_id,callback:function(e){t.$set(t.inscripcion,"plan_id",e)},expression:"inscripcion.plan_id"}})],1)])]),a("q-card-actions",{staticClass:"flex flex-center"},[a("q-btn",{attrs:{color:"negative"},on:{click:function(e){return t.close()}}},[t._v("\n          Cancelar\n        ")]),a("q-btn",{attrs:{color:"positive",type:"submit",loading:t.loading}},[t._v("\n          Guardar\n        ")])],1)],1),a("q-inner-loading",{attrs:{showing:t.loading}},[a("q-spinner-gears",{attrs:{size:"50px",color:"primary"}})],1)],1)],1)}),s=[],r={name:"Add",data(){return{dialog:!1,estudiante:{},inscripcion:{},loading:!1,sucursales:[],carreras:[],turnos:[],paralelos:[],planes:[],encontrado:!1}},mounted(){this.getSucursales(),this.$root.$on("openDialogAdd",(()=>{this.dialog=!0}))},methods:{async getSucursales(){this.loading=!0;try{const t=await this.$axios.get("sucursales");this.sucursales=t.data}catch(t){console.log(t)}this.loading=!1},async getCarreras(t){this.loading=!0;try{const e=await this.$axios.get(`sucursales/${t}`);this.carreras=e.data.carreras}catch(e){console.log(e)}this.loading=!1},async getTurnos(t){this.loading=!0;try{const e=await this.$axios.get(`carreras/${t}`);this.turnos=e.data.turnos,this.paralelos=e.data.paralelos,this.planes=e.data.planes}catch(e){console.log(e)}this.loading=!1},async getEstudiante(){this.loading=!0;try{const t=await this.$axios.get(`estudiantes/carnet/${this.estudiante.carnet_identidad}`);t.data?(this.estudiante=t.data,this.encontrado=!0):this.encontrado=!1}catch(t){}this.loading=!1},close(){this.dialog=!1,this.$refs.form.resetValidation(),this.estudiante={},this.inscripcion={},this.encontrado=!1,this.$root.$emit("closeDialog")},async save(){this.loading=!0;try{if(this.encontrado)this.inscripcion.estudiante_id=this.estudiante.id;else{const t=await this.$axios.post("estudiantes",this.estudiante);this.inscripcion.estudiante_id=t.data.id}await this.$axios.post("inscripciones",this.inscripcion),this.$q.notify({message:"Guardado correctamente",color:"positive",icon:"check",position:"bottom-right"})}catch(t){console.log(t)}this.loading=!1,this.close()}}},l=r,c=a("2877"),d=a("24e8"),u=a("f09f"),p=a("0378"),m=a("65c6"),g=a("6ac5"),h=a("9c40"),f=a("a370"),b=a("27f9"),v=a("ddd8"),q=a("4b7e"),$=a("74f7"),x=a("cf57"),_=a("7f67"),y=a("eebe"),C=a.n(y),w=Object(c["a"])(l,n,s,!1,null,null,null),Q=w.exports;C()(w,"components",{QDialog:d["a"],QCard:u["a"],QForm:p["a"],QToolbar:m["a"],QToolbarTitle:g["a"],QBtn:h["a"],QCardSection:f["a"],QInput:b["a"],QSelect:v["a"],QCardActions:q["a"],QInnerLoading:$["a"],QSpinnerGears:x["a"]}),C()(w,"directives",{ClosePopup:_["a"]});var k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{attrs:{persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("q-card",{staticStyle:{width:"300px"}},[a("q-form",{ref:"form",on:{submit:function(e){return t.save()}}},[a("q-toolbar",{staticClass:"glossy bg-primary text-white"},[a("q-toolbar-title",[a("span",{staticClass:"text-weight-bold"},[t._v("Editar")])]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),a("q-card-section",{staticClass:"q-gutter-sm"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("q-input",{attrs:{label:"Nombre",rules:[function(t){return!!t||"Este campo es requerido"}]},model:{value:t.form.nombre,callback:function(e){t.$set(t.form,"nombre",e)},expression:"form.nombre"}})],1)])]),a("q-card-actions",{staticClass:"flex flex-center"},[a("q-btn",{attrs:{color:"negative"},on:{click:function(e){return t.close()}}},[t._v("\n          Cancelar\n        ")]),a("q-btn",{attrs:{color:"positive",loading:t.loading},on:{click:function(e){return t.save()}}},[t._v("\n          Guardar\n        ")])],1)],1)],1)],1)},E=[],D={name:"Edit",data(){return{dialog:!1,form:{},loading:!1}},mounted(){this.$root.$on("openDialogEdit",(t=>{this.dialog=!0,this.form=t}))},methods:{close(){this.dialog=!1,this.$refs.form.resetValidation(),this.form={},this.$root.$emit("closeDialog")},async save(){this.loading=!0;try{await this.$axios.put(`lugar/${this.form.id}`,this.form),this.$q.notify({message:"Guardado correctamente",color:"positive",icon:"check",position:"bottom-right"})}catch(t){console.log(t)}this.loading=!1,this.close()}}},S=D,T=Object(c["a"])(S,k,E,!1,null,null,null),I=T.exports;C()(T,"components",{QDialog:d["a"],QCard:u["a"],QForm:p["a"],QToolbar:m["a"],QToolbarTitle:g["a"],QBtn:h["a"],QCardSection:f["a"],QInput:b["a"],QCardActions:q["a"]}),C()(T,"directives",{ClosePopup:_["a"]});var O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Eliminar")])]),a("q-card-section",[t._v("\n      ¿Está seguro de eliminar el registro?\n    ")]),a("q-card-actions",{staticClass:"flex flex-center"},[a("q-btn",{attrs:{color:"negative"},on:{click:function(e){return t.close()}}},[t._v("\n        Cancelar\n      ")]),a("q-btn",{attrs:{color:"positive"},on:{click:function(e){return t.deleteItem()}}},[t._v("\n        Eliminar\n      ")])],1)],1)],1)},A=[],N={name:"Delete",data(){return{dialog:!1,ctx:{url:""}}},mounted(){this.$root.$on("deleteDialog",(t=>{this.dialog=!0,this.ctx=JSON.parse(t)}))},methods:{close(){this.dialog=!1,this.ctx={},this.$root.$emit("closeDialog")},async deleteItem(){try{await this.$axios.delete(this.ctx.url),this.$q.notify({message:"Registro eliminado",color:"positive",position:"bottom-right"}),this.close()}catch(t){console.log(t)}}}},P=N,R=Object(c["a"])(P,O,A,!1,null,null,null),j=R.exports;C()(R,"components",{QDialog:d["a"],QCard:u["a"],QCardSection:f["a"],QCardActions:q["a"],QBtn:h["a"]});var G={name:"Index",components:{Add:Q,Edit:I,DeleteItem:j},data(){return{filter:"",document:"",loading:!1,columns:[{name:"estudiante",required:!0,label:"Estudiante",align:"center",field:t=>t.estudiante.nombre,format:t=>`${t}`},{name:"carrera",required:!0,label:"Carrera",align:"center",field:t=>t.carrera.nombre,format:t=>`${t}`},{name:"turno",required:!0,label:"Turno",align:"center",field:t=>t.turno.nombre,format:t=>`${t}`},{name:"paralelo",required:!0,label:"Paralelo",align:"center",field:t=>t.paralelo.nombre,format:t=>`${t}`},{name:"plan",required:!0,label:"Plan",align:"center",field:t=>t.plan.nombre,format:t=>`${t}`},{name:"opciones",required:!0,label:"Opciones",align:"center"}],table:[]}},mounted(){this.getTable(),this.$root.$on("closeDialog",(()=>{this.getTable()}))},methods:{async getTable(){this.loading=!0;try{const t=await this.$axios.get("inscripciones");this.table=t.data,this.loading=!1}catch(t){console.log(t)}this.loading=!1},addData(){this.$root.$emit("openDialogAdd")},editData(t){this.$root.$emit("openDialogEdit",t)},deleteData(t){const e={url:`inscripciones/${t.id}`};this.$root.$emit("deleteDialog",JSON.stringify(e))},async generateReport(){const t=await this.$axios.get("reportes/estudiantes",{responseType:"arraybuffer"}),e=new Blob([t.data],{type:"application/pdf"});this.document=window.URL.createObjectURL(e),window.open(window.URL.createObjectURL(e)),console.log(t.data)}}},B=G,L=a("9989"),J=a("eaac"),U=a("0016"),F=a("2c91"),V=a("eb85"),z=a("db86"),H=Object(c["a"])(B,i,o,!1,null,null,null);e["default"]=H.exports;C()(H,"components",{QPage:L["a"],QTable:J["a"],QInput:b["a"],QIcon:U["a"],QSpace:F["a"],QSeparator:V["a"],QBtn:h["a"],QTd:z["a"]})}}]);